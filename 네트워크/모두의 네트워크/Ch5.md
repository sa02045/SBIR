# 네트워크 계층 : 목적지에 데이터 전달하기

## 네트워크 계층의 역할

| 서로 다른 네트워크에 있는 목적지로 데이터를 전송하는 역할

- 데이터 링크 계층의 기능만으로는 해당 네트워크 안에서만 통신이 가능하다
- 네트워크 계층의 도움을 받아 다른 네트워크와 통신하보자

### 라우터(Router)

| 데이터의 목적지가 정해지면 목적지까지 어떤 경로로 가는것이 좋은지 알려주는 장비

- 네트워크에서도 데이터를 보내려면 목적지 주소가 필요하다
- MAC주소는 아니다. 랜에서만 MAC주소로 통신할 수 있다
- `IP주소`가 필요하다

| IP주소로 어떤 네트워크의 어떤 컴퓨터인지를 구분할 수 있다

- IP주소로 목적지를 정하는 것 뿐만아니라 데이터를 `어떤 경로`로 보낼지 결정해야한다
- 이것을 `라우팅`이라고 한다

## IP란?

- 네트워크 계층을 거칠 때 데이터이 `IP 헤더`를 붙인다
- IP헤더에는 목적지 IP주소 , 출발지의 IP주소가 있다
- 그외에 다양한 정보들이 있다

| 패킷 = IP 헤더 + 데이터

### 정리

1. 데이터링크 계층은 같은 네트워크안에서만 랜(허브)을 통해 통신할 수 있다
2. 다른 네트워크와 통신하려면 네트워크 계층이 필요하다
3. `라우터`는 목적지까지 어떤 경로로 가는지 알려주고 이를 라우팅이라고 한다
4. MAC주소가 아닌 `IP주소`가 필요한데, 어떤 네트워크의 어떤 컴퓨터인지 알려준다
5. 네트워크 계층을 지나면 캡슐화로 IP헤더를 붙인다

## IP의 구조

- IP주소는 ISP(인터넷 서비스 제공자)로부터 받는다
- IP버전에는 IPv4(32비트), IPv6(128비트)이 있다
- IP주소는 공인 IP, 사설 IP주소가 있다

- 인터넷에 직접 연결되는 컴퓨터,라우터는 공인 IP주소를, 랜에 있는 컴퓨터에는 사설 IP주소를 붙인다

- `DHCP` : IP주소를 자동으로 할당하는 프로토콜
- IP주소는 10진수로 표시하지만 실제로는 2진수로 되어 있다
  ex) 192.102.1.10 (8\* 4 = 32비트)

- IP주소는 네트워크 ID, 호스트ID로 나누어져 있다

네트워크 ID는 어떤 네트워크인지, 호스트ID는 어떤 컴퓨터인지 나타낸다

### IP 정리

1. 버전 : 비트에 따라 IPv4, IPv6
2. 구성 : 네트워크 ID + 호스트 ID
3. 4옥텟(8비트)로 구성되어 있고, 10진수로 표기하지만 실제는 2진수
4. 라우터에 공인 IP주소를 , 같은 랜에있는 경우 사설 IP주소를 붙인다

## IP주소의 클래스 구조

| 네트워크 규모에 따라 A~E클래스로 나누어져 있음

대규모 : A클래스
중형 : B클래스
소규모 : C클래스
멀티캐스트 : D클래스
연구,특수 : E클래스

| 가정의 랜에서는 보통 C클래스 사설 IP주소를 사용한다

- 192.168.XX.X

## 네트워크 주소와 브로드캐스트 주소의 구조

- 호스트 ID가 0이면 네트워크 주소
- 255이면 브로드캐스트 주소이다

  192.168.1.0 => 네트워크 주소
  192.168.1.255 => 브로드캐스트 주소

- 네트워크 주소는 전체 네트워크에서 작은 네트워크를 식별하는 데 사용된다
  192.168.1.0 => 하나의 네트워크 전체를 대표

- 브로드캐스트 주소는 네트워크에 있는 컴퓨터에게 한번에 데이터를 전송하기 위해 사용되는 IP주소이다

  192.168.1.255로 데이터를 전송하면 192.168.1.0 네트워크에 있는 컴퓨터들에게 모두 데이터가 전송된다

### 정리

1. 네트워크주소, 브로드캐스트 주소는 컴퓨터에 설정할 수 없다

## 서브넷의 구조

- 네트워크를 분할 하는 것을 서브넷팅이라고 한다

### 서브넷이란?

- 복습) IP주소는 A,B,C, 클래스로 나누어져 있다

A클래스의 대규모 네트워크를 작은 네트워크로 분할하여 브로드캐스트로 전송되는 패킷의 범위를 좁힐 수 있다
(이해안됨....)

- 이렇게 분할하는 것을 `서브넷팅` 분할된 네트워크를 `서브넷`이라고한다

- A클래스는 네트워크 ID + 호스트 ID로 나누어져 있는데 이것을 네트워크 ID + 서브넷 ID + 호스트 ID로 나눈다
- 호스트ID에 쓰이던 비트를 빌려 서브넷 ID로 만드는 것이다

### 서브넷 마스크란?

- IP주소를 서브넷팅 하면, 어디까지가 호스트 ID인지, 네트워크 ID인지 판단하기 어려울 때가 있다.
- `서브넷 마스크`를 사용하여 이것을 판단한다

| 서브넷 마스크는 `네트워크 ID`와 `호스트 ID`를 식별하기 위한 값이다

### 정리

1. 전반적으로 이해가 안가는 부분이 많았음. 조사후 정리할 예정

## 라우터의 구조

### 라우터란?

- 서로 다른 네트워크를 분리한다

- 컴퓨터 1이 다른 네트워크의 컴퓨터 6에 데이터를 전송하려면 라우터의 IP주소를 설정해야 한다
- 라우터의 IP주소는 네트워크의 출입구 같은데 이것을 `기본 게이트웨이` 라고 한다
- 기본 게이트웨이가 설정되어있지만 이것만으로는 데이터를 전송할 수 없다. `라우팅`이라는 기능이 필요하다

### 라우팅이란?

| 경로 정보를 기반으로 현재 네트워크에서 다른 네트워크로 최적의 경로로 데이터를 전송하는 것

- 이 경로 정보가 등록되어 있는 테이블이 라우팅 테이블

- 라우팅 테이블은 관리자가 수동으로 등록하는 방법(소규모), 자동으로 등록하는 방법(대규모)이 있다

- 라우팅 정보를 교환하기 위한 프로토콜을 `라우팅 프로토콜` 이라고 한다

### 정리

1. 서로 다른 네트워크가 통신하려면 라우터가 필요하다

2. 라우터는 네트워크를 분할하지만, 스위치와 허브는 분할 할 수 없다

3. 다른 네트워크로 데이터를 전송하려면 기본 게이트웨이를 설정해야한다

4. 라우팅은 최적의 경로를 통해 데이터를 전송하고, 이를 경로 정보에 기록한다

5. 경로 정보가 등록되어 있는 테이블을 라우팅 테이블이라고 한다

6. 라우팅 정보를 교환하기 위한 프로토콜이 라우팅 프로토콜이다

## 5장 총 정리

1. 서로 다른 네트워크가 통신하려면 라우터가 필요하다
2. 네트워크 계층에서 캡슐화 할 때는 IP헤더를 추가한다
3. IP주소 종류는 공인 IP, 사설 IP 주소가 있다
4. 네트워크 주소와 브로드캐스트 주소는 할당할 수 없는 IP주소이다
5. 경로정보가 저장되어 있는 테이블을 라우팅 테이블이라고 한다
6. 네트워크 계층은 다른 네트워크와 통신하기 위한 경로 설정과 패킷 전송을 담당한다
7. IP 프로토콜을 이용해 다른 컴퓨터로 네트워크를 보낼 수 있다
8. IP 주소 클래스는 IPv4에서 A,B,C,D,E클래스로 구분된다
9. 서브넷팅은 큰 네트워크를 쪼개 작은 네트워크로 만든다
