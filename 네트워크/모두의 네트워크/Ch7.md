# 응용 계층 애플리케이션에 데이터 전송하기

(세션계층과 표현계층을 포함하여 설명)

| 응용계층은 사용자의 요청을 전달하기 위해 서버가 이해할 수 있는 메시지로 변환하여 전송계층으로 전달하는 역할을 한다

- 클라이언트의 애플리케이션과 서버의 서버프로그램의 통신은 응용계층의 프로토콜을 사용한다

1. 웹사이트를 볼 때는 `HTTP` 프로토콜
2. 파일을 전송할 때는 `FTP` 프로토콜
3. 메일을 보낼 때는 `SMTP` 프로토콜
4. 메일을 받을 떄는 `POP3` 프로토콜
5. 이름 해석을 위해 `DNS` 프로토콜

# 웹 서버의 구조

## WWW란?

WWW는 아래 세가지 기술을 사용한다

1. HTML
2. URL
3. HTTP

## HTTP란?

- 클라이언트는 웹 사이트를 보기 위해 서버의 80번 포트를 사용하여 HTTP 통신을 한다
- HTTP 요청을 보내고 서버에서 HTTP 응답을 반환한다

1. `HTTP/1.0`버전에서는 연결했다 끊는 작업을 반복했다. 그만큼 느리다
2. `HTTP/1.1`버전에서 `keepalive` 기능이 추가됬다

   - 연결을 한 번 수립하면 데이터 교환을 마칠때 까지 유지하고, 데이터 교환이 끝나면 연결을 모두 끊는다
   - 요청을 보낸 순서대로 응답을 반환하게 되는데, 이전 요청처리시간이 길어지면 다음 요청에 대한 처리가 늦어지는 문제가 있다

3. `HTTP/2.0`버전에는 요청을 보낸 순서대로 응답을 반환하지 않아도된다

   - 콘텐츠를 빠르게 표시할 수 있다

## 정리

1. 클라이언트는 웹 서버의 80번포트를 통해 HTTP 통신을 한다

2. 브라우저가 HTTP 요청을 보내면 웹서버는 HTTP응답을 한다

3. HTTP/1.1버전에는 keepalive기능이 있어 데이터를 교환하는 동안에는 연결을 유지하고, 끝나면 연결을 끊는다.

4. HTTP/2.0버전에서는 요청을 보내는 순서대로 응답을 반환하지 않아도 된다

# DNS서버의 구조

## 도메인 이름이란?

| DNS는 URL을 IP주소로 변환하는 시스템이다

DNS서버에 접속하면 이름해석 (name resolution)을 통해 아래처럼 변환한다
`www.naver.com` => 225.235.64.222

- www.naver.com을 `도메인 이름`이라고 한다

- 도메인이름 앞에 붙인 `www`는 호스트 이름이라고 한다

### 브라우저에서 접속하면

1. 브라우저에 URL을 입력한다
2. DNS서버로 가서 도메인 이름에 대한 IP주소를 반환받는다
3. IP주소로 접속한다

- 하지만 첫 번째 DNS가 도메인의 IP주소를 모르는 경우가 있다

- 모르는 경우 다음 DNS서버인 DNS 2서버에 질문을 한다
- DNS서버는 `계층적`으로 연결,구성되어 있다

# 메일 서버의 구조

| 메일 송수신을 위해 클라이언트측 메일 프로그램과, 서버측 메일 프로그램이 통신해야한다

- 이 때 사용되는 프로토콜은 두가지 종류가 있다

1. 메일 보낼 때 `SMTP` 포트번호 25번
2. 메일 받을 때 `POP3` 포트번호 110번

## 메일을 주고받는 과정

1. 메일을 보낸다(SMTP)
2. 메일 서버1이 메일서버2로 보낸다(SMTP)
3. 메일서버2가 컴퓨터2에 메일을 전송한다(POP3)

- 메일서버는 포털사이트, 회사메일 서버를 사용하는 경우가 많다

컴퓨터1이 메일서버1과 통신을 할 때는

1. 세션시작을 통지
2. 송신자의 메일주소를 통지
3. 목적지의 메일주소를 통지
4. 메일 본문 전송을 통지
5. 본문 전송
6. 세션 종료를 통지한다

메일 서버2는 `POP3`를 사용해서 메일을 컴퓨터2로 전송한다

1. 메일서버에는 `메일박스`라고하는 메일을 보관해주는 기능이 있다
2. 메일서버2는 POP3를 사용하여 메일서버 2의 메일박스에서 메일을 컴퓨터2로 전송한다

# 복습

1. 웹브라우저와 웹서버와의 통신은 HTTP프로토콜을 사용한다
2. 일반적으로 웹서버는 80번 프로토콜을 사용한다
3. DNS서버는 도메인이름-IP주소에 대한 대응표를 가지고 있어 이름해석을 한다
4. 메일 송신프로토콜은 SMTP, 25번포트가 있고 수신프로토콜은 POP3, 110번 포트가 있다
